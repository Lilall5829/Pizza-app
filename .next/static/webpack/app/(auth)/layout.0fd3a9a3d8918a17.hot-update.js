"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(auth)/layout",{

/***/ "(app-pages-browser)/./src/lib/backgroundUpload.ts":
/*!*************************************!*\
  !*** ./src/lib/backgroundUpload.ts ***!
  \*************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBackgroundImageUrl: function() { return /* binding */ getBackgroundImageUrl; },\n/* harmony export */   listBackgroundImages: function() { return /* binding */ listBackgroundImages; },\n/* harmony export */   uploadBackgroundImage: function() { return /* binding */ uploadBackgroundImage; }\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(app-pages-browser)/./src/lib/supabase.ts\");\n\n/**\r\n * 上传背景图片到 Supabase Storage\r\n * @param file - 图片文件\r\n * @param fileName - 文件名（可选，默认为 auth-background）\r\n * @returns Promise<UploadBackgroundResult>\r\n */ async function uploadBackgroundImage(file) {\n    let fileName = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"auth-background\";\n    try {\n        // 验证文件类型\n        const allowedTypes = [\n            \"image/jpeg\",\n            \"image/png\",\n            \"image/webp\"\n        ];\n        if (!allowedTypes.includes(file.type)) {\n            return {\n                success: false,\n                error: \"Only JPEG, PNG, and WebP images are allowed\"\n            };\n        }\n        // 验证文件大小（5MB）\n        const maxSize = 5 * 1024 * 1024; // 5MB\n        if (file.size > maxSize) {\n            return {\n                success: false,\n                error: \"File size must be less than 5MB\"\n            };\n        }\n        // 生成文件名（包含扩展名）\n        const fileExt = file.name.split(\".\").pop();\n        const fullFileName = \"\".concat(fileName, \".\").concat(fileExt);\n        // 删除旧文件（如果存在）\n        await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.storage.from(\"backgrounds\").remove([\n            fullFileName\n        ]);\n        // 上传新文件\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.storage.from(\"backgrounds\").upload(fullFileName, file, {\n            cacheControl: \"3600\",\n            upsert: true\n        });\n        if (error) {\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n        // 获取公共 URL\n        const { data: { publicUrl } } = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.storage.from(\"backgrounds\").getPublicUrl(fullFileName);\n        return {\n            success: true,\n            url: publicUrl\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Upload failed\"\n        };\n    }\n}\n/**\r\n * 获取背景图片的公共 URL\r\n * @param fileName - 文件名\r\n * @returns 公共 URL\r\n */ function getBackgroundImageUrl() {\n    let fileName = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"auth-background.png\";\n    const { data: { publicUrl } } = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.storage.from(\"backgrounds\").getPublicUrl(fileName);\n    // 修复双斜杠问题\n    const fixedUrl = publicUrl.replace(\"//\", \"/\").replace(\"http:/\", \"http://\").replace(\"https:/\", \"https://\");\n    return fixedUrl;\n}\n/**\r\n * 列出所有背景图片\r\n */ async function listBackgroundImages() {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.storage.from(\"backgrounds\").list(\"\", {\n        limit: 100,\n        sortBy: {\n            column: \"created_at\",\n            order: \"desc\"\n        }\n    });\n    if (error) {\n        throw error;\n    }\n    return data || [];\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvYmFja2dyb3VuZFVwbG9hZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNDO0FBUXRDOzs7OztDQUtDLEdBQ00sZUFBZUMsc0JBQ3BCQyxJQUFVO1FBQ1ZDLFdBQUFBLGlFQUFtQjtJQUVuQixJQUFJO1FBQ0YsU0FBUztRQUNULE1BQU1DLGVBQWU7WUFBQztZQUFjO1lBQWE7U0FBYTtRQUM5RCxJQUFJLENBQUNBLGFBQWFDLFFBQVEsQ0FBQ0gsS0FBS0ksSUFBSSxHQUFHO1lBQ3JDLE9BQU87Z0JBQ0xDLFNBQVM7Z0JBQ1RDLE9BQU87WUFDVDtRQUNGO1FBRUEsY0FBYztRQUNkLE1BQU1DLFVBQVUsSUFBSSxPQUFPLE1BQU0sTUFBTTtRQUN2QyxJQUFJUCxLQUFLUSxJQUFJLEdBQUdELFNBQVM7WUFDdkIsT0FBTztnQkFDTEYsU0FBUztnQkFDVEMsT0FBTztZQUNUO1FBQ0Y7UUFFQSxlQUFlO1FBQ2YsTUFBTUcsVUFBVVQsS0FBS1UsSUFBSSxDQUFDQyxLQUFLLENBQUMsS0FBS0MsR0FBRztRQUN4QyxNQUFNQyxlQUFlLEdBQWVKLE9BQVpSLFVBQVMsS0FBVyxPQUFSUTtRQUVwQyxjQUFjO1FBQ2QsTUFBTVgsK0NBQVFBLENBQUNnQixPQUFPLENBQ25CQyxJQUFJLENBQUMsZUFDTEMsTUFBTSxDQUFDO1lBQUNIO1NBQWE7UUFFeEIsUUFBUTtRQUNSLE1BQU0sRUFBRUksSUFBSSxFQUFFWCxLQUFLLEVBQUUsR0FBRyxNQUFNUiwrQ0FBUUEsQ0FBQ2dCLE9BQU8sQ0FDM0NDLElBQUksQ0FBQyxlQUNMRyxNQUFNLENBQUNMLGNBQWNiLE1BQU07WUFDMUJtQixjQUFjO1lBQ2RDLFFBQVE7UUFDVjtRQUVGLElBQUlkLE9BQU87WUFDVCxPQUFPO2dCQUNMRCxTQUFTO2dCQUNUQyxPQUFPQSxNQUFNZSxPQUFPO1lBQ3RCO1FBQ0Y7UUFFQSxXQUFXO1FBQ1gsTUFBTSxFQUFFSixNQUFNLEVBQUVLLFNBQVMsRUFBRSxFQUFFLEdBQUd4QiwrQ0FBUUEsQ0FBQ2dCLE9BQU8sQ0FDN0NDLElBQUksQ0FBQyxlQUNMUSxZQUFZLENBQUNWO1FBRWhCLE9BQU87WUFDTFIsU0FBUztZQUNUbUIsS0FBS0Y7UUFDUDtJQUVGLEVBQUUsT0FBT2hCLE9BQU87UUFDZCxPQUFPO1lBQ0xELFNBQVM7WUFDVEMsT0FBT0EsaUJBQWlCbUIsUUFBUW5CLE1BQU1lLE9BQU8sR0FBRztRQUNsRDtJQUNGO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ00sU0FBU0s7UUFBc0J6QixXQUFBQSxpRUFBbUI7SUFDdkQsTUFBTSxFQUFFZ0IsTUFBTSxFQUFFSyxTQUFTLEVBQUUsRUFBRSxHQUFHeEIsK0NBQVFBLENBQUNnQixPQUFPLENBQzdDQyxJQUFJLENBQUMsZUFDTFEsWUFBWSxDQUFDdEI7SUFFaEIsVUFBVTtJQUNWLE1BQU0wQixXQUFXTCxVQUFVTSxPQUFPLENBQUMsTUFBTSxLQUFLQSxPQUFPLENBQUMsVUFBVSxXQUFXQSxPQUFPLENBQUMsV0FBVztJQUU5RixPQUFPRDtBQUNUO0FBRUE7O0NBRUMsR0FDTSxlQUFlRTtJQUNwQixNQUFNLEVBQUVaLElBQUksRUFBRVgsS0FBSyxFQUFFLEdBQUcsTUFBTVIsK0NBQVFBLENBQUNnQixPQUFPLENBQzNDQyxJQUFJLENBQUMsZUFDTGUsSUFBSSxDQUFDLElBQUk7UUFDUkMsT0FBTztRQUNQQyxRQUFRO1lBQUVDLFFBQVE7WUFBY0MsT0FBTztRQUFPO0lBQ2hEO0lBRUYsSUFBSTVCLE9BQU87UUFDVCxNQUFNQTtJQUNSO0lBRUEsT0FBT1csUUFBUSxFQUFFO0FBQ25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9saWIvYmFja2dyb3VuZFVwbG9hZC50cz9mZjdhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi9zdXBhYmFzZSc7XHJcblxyXG5leHBvcnQgdHlwZSBVcGxvYWRCYWNrZ3JvdW5kUmVzdWx0ID0ge1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgdXJsPzogc3RyaW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIOS4iuS8oOiDjOaZr+WbvueJh+WIsCBTdXBhYmFzZSBTdG9yYWdlXHJcbiAqIEBwYXJhbSBmaWxlIC0g5Zu+54mH5paH5Lu2XHJcbiAqIEBwYXJhbSBmaWxlTmFtZSAtIOaWh+S7tuWQje+8iOWPr+mAie+8jOm7mOiupOS4uiBhdXRoLWJhY2tncm91bmTvvIlcclxuICogQHJldHVybnMgUHJvbWlzZTxVcGxvYWRCYWNrZ3JvdW5kUmVzdWx0PlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwbG9hZEJhY2tncm91bmRJbWFnZShcclxuICBmaWxlOiBGaWxlLCBcclxuICBmaWxlTmFtZTogc3RyaW5nID0gJ2F1dGgtYmFja2dyb3VuZCdcclxuKTogUHJvbWlzZTxVcGxvYWRCYWNrZ3JvdW5kUmVzdWx0PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIOmqjOivgeaWh+S7tuexu+Wei1xyXG4gICAgY29uc3QgYWxsb3dlZFR5cGVzID0gWydpbWFnZS9qcGVnJywgJ2ltYWdlL3BuZycsICdpbWFnZS93ZWJwJ107XHJcbiAgICBpZiAoIWFsbG93ZWRUeXBlcy5pbmNsdWRlcyhmaWxlLnR5cGUpKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6ICdPbmx5IEpQRUcsIFBORywgYW5kIFdlYlAgaW1hZ2VzIGFyZSBhbGxvd2VkJ1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmqjOivgeaWh+S7tuWkp+Wwj++8iDVNQu+8iVxyXG4gICAgY29uc3QgbWF4U2l6ZSA9IDUgKiAxMDI0ICogMTAyNDsgLy8gNU1CXHJcbiAgICBpZiAoZmlsZS5zaXplID4gbWF4U2l6ZSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnRmlsZSBzaXplIG11c3QgYmUgbGVzcyB0aGFuIDVNQidcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDnlJ/miJDmlofku7blkI3vvIjljIXlkKvmianlsZXlkI3vvIlcclxuICAgIGNvbnN0IGZpbGVFeHQgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKTtcclxuICAgIGNvbnN0IGZ1bGxGaWxlTmFtZSA9IGAke2ZpbGVOYW1lfS4ke2ZpbGVFeHR9YDtcclxuXHJcbiAgICAvLyDliKDpmaTml6fmlofku7bvvIjlpoLmnpzlrZjlnKjvvIlcclxuICAgIGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgLmZyb20oJ2JhY2tncm91bmRzJylcclxuICAgICAgLnJlbW92ZShbZnVsbEZpbGVOYW1lXSk7XHJcblxyXG4gICAgLy8g5LiK5Lyg5paw5paH5Lu2XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlXHJcbiAgICAgIC5mcm9tKCdiYWNrZ3JvdW5kcycpXHJcbiAgICAgIC51cGxvYWQoZnVsbEZpbGVOYW1lLCBmaWxlLCB7XHJcbiAgICAgICAgY2FjaGVDb250cm9sOiAnMzYwMCcsXHJcbiAgICAgICAgdXBzZXJ0OiB0cnVlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6I635Y+W5YWs5YWxIFVSTFxyXG4gICAgY29uc3QgeyBkYXRhOiB7IHB1YmxpY1VybCB9IH0gPSBzdXBhYmFzZS5zdG9yYWdlXHJcbiAgICAgIC5mcm9tKCdiYWNrZ3JvdW5kcycpXHJcbiAgICAgIC5nZXRQdWJsaWNVcmwoZnVsbEZpbGVOYW1lKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICB1cmw6IHB1YmxpY1VybFxyXG4gICAgfTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVXBsb2FkIGZhaWxlZCdcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog6I635Y+W6IOM5pmv5Zu+54mH55qE5YWs5YWxIFVSTFxyXG4gKiBAcGFyYW0gZmlsZU5hbWUgLSDmlofku7blkI1cclxuICogQHJldHVybnMg5YWs5YWxIFVSTFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJhY2tncm91bmRJbWFnZVVybChmaWxlTmFtZTogc3RyaW5nID0gJ2F1dGgtYmFja2dyb3VuZC5wbmcnKTogc3RyaW5nIHtcclxuICBjb25zdCB7IGRhdGE6IHsgcHVibGljVXJsIH0gfSA9IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgIC5mcm9tKCdiYWNrZ3JvdW5kcycpXHJcbiAgICAuZ2V0UHVibGljVXJsKGZpbGVOYW1lKTtcclxuICBcclxuICAvLyDkv67lpI3lj4zmlpzmnaDpl67pophcclxuICBjb25zdCBmaXhlZFVybCA9IHB1YmxpY1VybC5yZXBsYWNlKCcvLycsICcvJykucmVwbGFjZSgnaHR0cDovJywgJ2h0dHA6Ly8nKS5yZXBsYWNlKCdodHRwczovJywgJ2h0dHBzOi8vJyk7XHJcbiAgXHJcbiAgcmV0dXJuIGZpeGVkVXJsO1xyXG59XHJcblxyXG4vKipcclxuICog5YiX5Ye65omA5pyJ6IOM5pmv5Zu+54mHXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdEJhY2tncm91bmRJbWFnZXMoKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZVxyXG4gICAgLmZyb20oJ2JhY2tncm91bmRzJylcclxuICAgIC5saXN0KCcnLCB7XHJcbiAgICAgIGxpbWl0OiAxMDAsXHJcbiAgICAgIHNvcnRCeTogeyBjb2x1bW46ICdjcmVhdGVkX2F0Jywgb3JkZXI6ICdkZXNjJyB9XHJcbiAgICB9KTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcblxyXG4gIHJldHVybiBkYXRhIHx8IFtdO1xyXG59ICJdLCJuYW1lcyI6WyJzdXBhYmFzZSIsInVwbG9hZEJhY2tncm91bmRJbWFnZSIsImZpbGUiLCJmaWxlTmFtZSIsImFsbG93ZWRUeXBlcyIsImluY2x1ZGVzIiwidHlwZSIsInN1Y2Nlc3MiLCJlcnJvciIsIm1heFNpemUiLCJzaXplIiwiZmlsZUV4dCIsIm5hbWUiLCJzcGxpdCIsInBvcCIsImZ1bGxGaWxlTmFtZSIsInN0b3JhZ2UiLCJmcm9tIiwicmVtb3ZlIiwiZGF0YSIsInVwbG9hZCIsImNhY2hlQ29udHJvbCIsInVwc2VydCIsIm1lc3NhZ2UiLCJwdWJsaWNVcmwiLCJnZXRQdWJsaWNVcmwiLCJ1cmwiLCJFcnJvciIsImdldEJhY2tncm91bmRJbWFnZVVybCIsImZpeGVkVXJsIiwicmVwbGFjZSIsImxpc3RCYWNrZ3JvdW5kSW1hZ2VzIiwibGlzdCIsImxpbWl0Iiwic29ydEJ5IiwiY29sdW1uIiwib3JkZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/backgroundUpload.ts\n"));

/***/ })

});
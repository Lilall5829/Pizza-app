(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[151],{1627:function(e,s,r){Promise.resolve().then(r.bind(r,7721))},7721:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return h}});var a=r(7437),t=r(9295),l=r(1192),i=r(3999),n=r(7689),c=r(3113),d=r(2208),o=r(7648),m=r(9376),u=r(2265),x=r(9064);function h(){let{session:e,loading:s,isAdmin:r}=(0,l.a)(),[h,g]=(0,u.useState)(!1),[p,f]=(0,u.useState)([]),[j,b]=(0,u.useState)(!0);(0,u.useEffect)(()=>{s||e||(0,m.redirect)("/sign-in"),s||!e||r||(0,m.redirect)("/")},[e,s,r]),(0,u.useEffect)(()=>{e&&r&&N()},[e,r]);let N=async()=>{try{let e=await (0,i.uQ)();f(e)}catch(e){console.error("Error loading backgrounds:",e),x.ZP.error("Failed to load background images")}finally{b(!1)}},y=async e=>{var s;let r=null===(s=e.target.files)||void 0===s?void 0:s[0];if(r){g(!0);try{let s=await (0,i.Kl)(r);s.success?(x.ZP.success("Background image uploaded successfully!"),await N(),e.target.value=""):x.ZP.error(s.error||"Upload failed")}catch(e){x.ZP.error("Upload failed"),console.error("Upload error:",e)}finally{g(!1)}}},v=e=>{if(!e)return"Unknown";let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]},w=e=>{let s=(0,i.s8)(e);window.open(s,"_blank")};return s||j?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(t.h,{}),(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})]}):e&&r?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(t.h,{}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Background Images"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage login page background images"})]}),(0,a.jsx)(o.default,{href:"/admin",className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"Back to Admin"})]})}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg mb-8",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Upload New Background"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-500 transition-colors",children:[(0,a.jsx)(n.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{htmlFor:"background-upload",className:"cursor-pointer",children:[(0,a.jsx)("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Upload background image"}),(0,a.jsx)("span",{className:"mt-1 block text-sm text-gray-500",children:"JPEG, PNG or WebP up to 5MB"})]}),(0,a.jsx)("input",{id:"background-upload",type:"file",accept:"image/jpeg,image/png,image/webp",onChange:y,disabled:h,className:"hidden"})]}),h&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-500 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Uploading..."})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Current Background Images"})}),(0,a.jsx)("div",{className:"p-6",children:0===p.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"No background images uploaded yet"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(e=>{var s;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"aspect-video bg-gray-100 rounded-md mb-3 overflow-hidden",children:(0,a.jsx)("img",{src:(0,i.s8)(e.name),alt:e.name,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Size: ",v(null===(s=e.metadata)||void 0===s?void 0:s.size)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Uploaded: ",new Date(e.created_at).toLocaleDateString()]}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsxs)("button",{onClick:()=>w(e.name),className:"flex items-center space-x-1 text-xs text-indigo-600 hover:text-indigo-900",children:[(0,a.jsx)(d.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Preview"})]})})]})]},e.id)})})})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"How to use your background images"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,a.jsx)("li",{children:"Upload your preferred background image using the form above"}),(0,a.jsx)("li",{children:"Copy the image URL from the preview"}),(0,a.jsx)("li",{children:"Update the layout file to use your custom background"}),(0,a.jsx)("li",{children:"The image will be served from Supabase CDN for optimal performance"})]})})]})]})})})]})]}):null}},9295:function(e,s,r){"use strict";r.d(s,{h:function(){return m}});var a=r(7437),t=r(3896),l=r(9099),i=r(3247),n=r(6275),c=r(2369),d=r(8293),o=r(7648);function m(){let{session:e,isAdmin:s}=(0,t.a)(),{items:r}=(0,l.j)(),m=r.reduce((e,s)=>e+s.quantity,0);return(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsx)(o.default,{href:"/",className:"flex items-center",children:(0,a.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:"\uD83C\uDF54 Food Ordering"})}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,a.jsx)(o.default,{href:"/",className:"text-gray-700 hover:text-primary-600 transition-colors",children:"Home"}),(0,a.jsx)(o.default,{href:"/menu",className:"text-gray-700 hover:text-primary-600 transition-colors",children:"Menu"}),e&&(0,a.jsx)(o.default,{href:"/orders",className:"text-gray-700 hover:text-primary-600 transition-colors",children:"My Orders"}),s&&(0,a.jsx)(o.default,{href:"/admin",className:"text-gray-700 hover:text-primary-600 transition-colors",children:"Admin"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{className:"p-2 text-gray-700 hover:text-primary-600 transition-colors",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsxs)(o.default,{href:"/cart",className:"p-2 text-gray-700 hover:text-primary-600 transition-colors relative",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5"}),m>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:m})]}),e?(0,a.jsx)(o.default,{href:"/profile",className:"p-2 text-gray-700 hover:text-primary-600 transition-colors",children:(0,a.jsx)(c.Z,{className:"w-5 h-5"})}):(0,a.jsx)(o.default,{href:"/sign-in",className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors",children:"Sign In"}),(0,a.jsx)("button",{className:"md:hidden p-2 text-gray-700 hover:text-primary-600 transition-colors",children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})})]})]})})})}},1192:function(e,s,r){"use strict";r.d(s,{Providers:function(){return d},a:function(){return t.a},j:function(){return l.j}});var a=r(7437),t=r(3896),l=r(9099),i=r(2979),n=r(9827),c=r(2265);function d(e){let{children:s}=e,[r]=(0,c.useState)(()=>new i.S({defaultOptions:{queries:{staleTime:6e4,gcTime:6e5}}}));return(0,a.jsx)(n.aH,{client:r,children:(0,a.jsx)(t.Z,{children:(0,a.jsx)(l.Z,{children:s})})})}},3999:function(e,s,r){"use strict";r.d(s,{Kl:function(){return t},s8:function(){return l},uQ:function(){return i}});var a=r(5526);async function t(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auth-background";try{if(!["image/jpeg","image/png","image/webp"].includes(e.type))return{success:!1,error:"Only JPEG, PNG, and WebP images are allowed"};if(e.size>5242880)return{success:!1,error:"File size must be less than 5MB"};let r=e.name.split(".").pop(),t="".concat(s,".").concat(r);await a.O.storage.from("backgrounds").remove([t]);let{data:l,error:i}=await a.O.storage.from("backgrounds").upload(t,e,{cacheControl:"3600",upsert:!0});if(i)return{success:!1,error:i.message};let{data:{publicUrl:n}}=a.O.storage.from("backgrounds").getPublicUrl(t);return{success:!0,url:n}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Upload failed"}}}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auth-background.png",{data:{publicUrl:s}}=a.O.storage.from("backgrounds").getPublicUrl(e);return s.replace("//","/").replace("http:/","http://").replace("https:/","https://")}async function i(){let{data:e,error:s}=await a.O.storage.from("backgrounds").list("",{limit:100,sortBy:{column:"created_at",order:"desc"}});if(s)throw s;return e||[]}}},function(e){e.O(0,[215,33,648,942,99,971,117,744],function(){return e(e.s=1627)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{8402:function(e,s,t){Promise.resolve().then(t.bind(t,4664))},4664:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var r=t(7437),i=t(6281),a=t(9295),l=t(5526),n=t(9827),d=t(6593),c=t(1770),m=t(3145),x=t(7648),o=t(2265),h=t(9064);async function u(){let{data:e,error:s}=await l.O.from("products").select("*").order("name");if(s)throw s;return e||[]}async function f(e){let{error:s}=await l.O.from("products").delete().eq("id",e);if(s)throw s}function g(){let[e,s]=(0,o.useState)(null),t=(0,n.NL)(),{data:l,isLoading:g,error:j}=(0,d.a)({queryKey:["admin-products"],queryFn:u}),N=(0,c.D)({mutationFn:f,onSuccess:()=>{t.invalidateQueries({queryKey:["admin-products"]}),h.ZP.success("Product deleted successfully!"),s(null)},onError:e=>{console.error("Delete failed:",e),h.ZP.error("Failed to delete product, please try again")}}),p=e=>{N.mutate(e)};return(0,r.jsx)(i.Z,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(a.h,{}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Menu Management"}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)(x.default,{href:"/admin/menu/create",className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"➕ Add Product"}),(0,r.jsx)(x.default,{href:"/admin/images",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"\uD83D\uDDBC️ Manage Images"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold",children:"\uD83D\uDCE6"})})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Products"}),(0,r.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:(null==l?void 0:l.length)||0})]})})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold",children:"\uD83D\uDDBC️"})})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"With Images"}),(0,r.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:(null==l?void 0:l.filter(e=>e.image).length)||0})]})})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold",children:"\uD83D\uDCB0"})})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Average Price"}),(0,r.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:["$",(null==l?void 0:l.length)?(l.reduce((e,s)=>e+s.price,0)/l.length).toFixed(2):"0.00"]})]})})]})})})]}),g?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):j?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please check your network connection or try again later"})]}):(null==l?void 0:l.length)===0?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Start by adding your first product!"}),(0,r.jsx)(x.default,{href:"/admin/menu/create",className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"➕ Add Product"})]}):(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,r.jsx)("ul",{className:"divide-y divide-gray-200",children:null==l?void 0:l.map(t=>(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"px-4 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-16 w-16",children:t.image?(0,r.jsx)(m.default,{src:t.image,alt:t.name,width:64,height:64,className:"h-16 w-16 rounded-lg object-cover"}):(0,r.jsx)("div",{className:"h-16 w-16 rounded-lg bg-gray-200 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-400 text-xl",children:"\uD83D\uDCF7"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name}),(0,r.jsx)("div",{className:"ml-2",children:t.image?(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✅ Has Image"}):(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"❌ No Image"})})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Price: $",t.price.toFixed(2)," | ID:"," ",t.id]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.default,{href:"/admin/menu/".concat(t.id,"/edit"),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors",children:"✏️ Edit"}),e===t.id?(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>p(t.id),disabled:N.isPending,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors disabled:opacity-50",children:N.isPending?"Deleting...":"Confirm Delete"}),(0,r.jsx)("button",{onClick:()=>s(null),className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors",children:"Cancel"})]}):(0,r.jsx)("button",{onClick:()=>s(t.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors",children:"\uD83D\uDDD1️ Delete"})]})]})},t.id))})})]})]})})}},6281:function(e,s,t){"use strict";var r=t(7437),i=t(2216),a=t(9376),l=t(2265);s.Z=function(e){let{children:s}=e,{session:t,loading:n,isAdmin:d}=(0,i.aC)();return((0,l.useEffect)(()=>{n||t||(0,a.redirect)("/sign-in"),n||!t||d||(0,a.redirect)("/")},[t,n,d]),n)?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):t&&d?(0,r.jsx)(r.Fragment,{children:s}):null}},9295:function(e,s,t){"use strict";t.d(s,{h:function(){return x}});var r=t(7437),i=t(3896),a=t(9099),l=t(3247),n=t(6275),d=t(2369),c=t(8293),m=t(7648);function x(){let{session:e,isAdmin:s}=(0,i.a)(),{items:t}=(0,a.j)(),x=t.reduce((e,s)=>e+s.quantity,0);return(0,r.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsx)(m.default,{href:"/",className:"flex items-center",children:(0,r.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:"\uD83C\uDF54 Food Ordering"})}),(0,r.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,r.jsx)(m.default,{href:"/",className:"text-gray-700 hover:text-primary-600 transition-colors",children:"Home"}),(0,r.jsx)(m.default,{href:"/menu",className:"text-gray-700 hover:text-primary-600 transition-colors",children:"Menu"}),e&&(0,r.jsx)(m.default,{href:"/orders",className:"text-gray-700 hover:text-primary-600 transition-colors",children:"My Orders"}),s&&(0,r.jsx)(m.default,{href:"/admin",className:"text-gray-700 hover:text-primary-600 transition-colors",children:"Admin"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{className:"p-2 text-gray-700 hover:text-primary-600 transition-colors",children:(0,r.jsx)(l.Z,{className:"w-5 h-5"})}),(0,r.jsxs)(m.default,{href:"/cart",className:"p-2 text-gray-700 hover:text-primary-600 transition-colors relative",children:[(0,r.jsx)(n.Z,{className:"w-5 h-5"}),x>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:x})]}),e?(0,r.jsx)(m.default,{href:"/profile",className:"p-2 text-gray-700 hover:text-primary-600 transition-colors",children:(0,r.jsx)(d.Z,{className:"w-5 h-5"})}):(0,r.jsx)(m.default,{href:"/sign-in",className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors",children:"Sign In"}),(0,r.jsx)("button",{className:"md:hidden p-2 text-gray-700 hover:text-primary-600 transition-colors",children:(0,r.jsx)(c.Z,{className:"w-5 h-5"})})]})]})})})}},2216:function(e,s,t){"use strict";t.d(s,{aC:function(){return r.a}});var r=t(3896);t(9099),t(7437),new(t(2979)).S}},function(e){e.O(0,[215,33,648,145,954,99,971,117,744],function(){return e(e.s=8402)}),_N_E=e.O()}]);